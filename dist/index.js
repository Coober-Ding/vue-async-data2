!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("vue")):"function"==typeof define&&define.amd?define(["vue"],n):t.AsyncDataMixin=n(t.Vue)}(this,function(t){"use strict";function r(t){return null!==t&&"function"==typeof t}function s(t){return null!=t}function u(t,n){var e,a,o;-1==(o=(e=t)._asyncDataCtrl.quene).indexOf(a=n)&&o.push(a),e._asyncDataCtrl.hasWaitQue||(e.$nextTick(function(){var t=o.slice(0);o.length=0,e._asyncDataCtrl.hasWaitQue=!1,t.forEach(function(n){var a=e.$options.asyncData[n];return a.fetch.call(e).then(function(t){e[n]=t},function(t){r(a.error)?a.error.call(e,t):window.console.warn("you got a error when fecth asyncData[".concat(n,"] from remote"))})})}),e._asyncDataCtrl.hasWaitQue=!0)}function n(n,t){Object.keys(t).forEach(function(t){u(n,t)})}function a(i,c){if(e=!0,Object.keys(a=c).forEach(function(t){var n=a[t];s(n)&&r(n.fetch)&&r(n.init)||(e=!1)}),!e)throw Error("async_data.err.options_volidate_fail");var a,e;i._asyncDataCtrl={hasWaitQue:!1,quene:[]},i.$fetch=function(t){u(this,t)},Object.keys(c).forEach(function(n){var t,a,e,o=c[n];r(o.init)&&(e=o.init,s((t=i)[a=n])?t[a]=e():t.$set(t,a,e())),s(o.watch)&&o.watch.forEach(function(t){i.$watch(t,function(){u(i,n)})})})}var e={beforeCreate:function(){var t,n,a,e,o=this.$options.asyncData;s(o)&&0<Object.keys(o).length&&(t=this,n=Object.keys(o),a=t.$options.data,e={},t.$options.data=function(){return n.forEach(function(t){e[t]=null}),Object.assign(a(),e)})},created:function(){var t=this.$options.asyncData;s(t)&&0<Object.keys(t).length&&a(this,t)},activated:function(){s(this._asyncDataCtrl)&&n(this,this.$options.asyncData)},mounted:function(){s(this._asyncDataCtrl)&&n(this,this.$options.asyncData)}},o=(t=t&&t.hasOwnProperty("default")?t.default:t).config.optionMergeStrategies;return o.asyncData=o.methods,e});
