!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("vue")):"function"==typeof define&&define.amd?define(["vue"],n):t.AsyncDataMixin=n(t.Vue)}(this,function(t){"use strict";function c(t){return null!==t&&"function"==typeof t}function r(t){return null!=t}function s(e,t){var n=e._asyncDataCtrl.quene;n.push(t),e._asyncDataCtrl.hasWaitQue||(e.$nextTick(function(){var a=n.slice(0);n.length=0,e._asyncDataCtrl.hasWaitQue=!1,e.asyncDataLoading=!0,Promise.all(a.map(function(t){return e.$options.asyncData[t].fetch.call(e)})).then(function(t){e.asyncDataLoading=!1;for(var n=0;n<a.length;n++){e[a[n]]=t[n]}})}),e._asyncDataCtrl.hasWaitQue=!0)}function u(t,n,a){r(t[n])?t[n]=a():t.$set(t,n,a())}function e(n,t){Object.keys(t).filter(function(t){return-1==n._asyncDataCtrl.quene.indexOf(t)}).forEach(function(t){s(n,t)})}function n(a,e){if(o=!0,Object.keys(i=e).forEach(function(t){var n=i[t];r(n)&&c(n.fetch)||(o=!1)}),!o)throw Error("async_data.err.options_volidate_fail");var i,o;a._asyncDataCtrl={hasWaitQue:!1,quene:[]},Object.keys(e).forEach(function(n){var t=e[n];c(t.init)&&u(a,n,t.init),r(t.watch)&&t.watch.forEach(function(t){a.$watch(t,function(){s(a,n)})})})}var a={data:function(){return{asyncDataLoading:!1}},beforeCreate:function(){var t,n,a,e;n=Object.keys((t=this).$options.asyncData),a=t.$options.data,e={},t.$options.data=function(){return n.forEach(function(t){e[t]=null}),Object.assign(a(),e)}},created:function(){var t=this.$options.asyncData;r(t)&&n(this,t)},activated:function(){var n,a,t=this.$options.asyncData;r(t)&&(n=this,Object.keys(a=t).forEach(function(t){u(n,t,a[t].init)}),n._asyncDataCtrl.hasClear=!0,e(this,t))},mounted:function(){var t=this.$options.asyncData;r(t)&&e(this,t)}},i=(t=t&&t.hasOwnProperty("default")?t.default:t).config.optionMergeStrategies;return i.asyncData=i.methods,a});
